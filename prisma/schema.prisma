// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  id              Int       @id @default(autoincrement())
  googleUserId    String?   @unique @map("google_user_id") 
  email           String?
  name            String?
  givenName       String?   @map("given_name")
  familyName      String?   @map("family_name")
  picture         String?
  credits         String    @default("5")
  accessToken     String?   @db.Text @map("access_token")
  ip              String?   @default("0.0.0.0")
  type            String    @default("1") // 对应网站类型：1.removermarca 2.genanime 等
  lastDailyReward DateTime? @map("last_daily_reward") // 最后一次领取每日奖励的时间
  currentStreak   Int?      @default(0) @map("current_streak") // 当前连续签到天数
  createTime      DateTime  @default(now()) @map("create_time")
  updateTime      DateTime  @updatedAt @map("update_time")

  // 【关键】联合唯一索引：保证同一个 email + type 组合只有一条记录
  @@unique([email, type], name: "email_type") 
  @@map("google_user")
}
